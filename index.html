<html>
<head>
	<title>Fabula Ultima Quick Antagonist Assembler</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
	
	<script src="scripts/NPC.js"></script>
	<script src="scripts/Attack.js"></script>
	<script src="scripts/Display.js"></script>
	<script src="scripts/Modifiers.js"></script>
	<script src="scripts/Spells.js"></script>
	
	<script src="scripts/Levels.js"></script>
	<script src="scripts/Ranks.js"></script>
	
	<script src="scripts/Beast.js"></script>
	<script src="scripts/Construct.js"></script>
	<script src="scripts/Demon.js"></script>
	<script src="scripts/Elemental.js"></script>
	<script src="scripts/Humanoid.js"></script>
	<script src="scripts/Monster.js"></script>
	<script src="scripts/Plant.js"></script>
	<script src="scripts/Undead.js"></script>
	<script src="scripts/Species.js"></script>
	
	<script src="scripts/Brute.js"></script>
	<script src="scripts/Hunter.js"></script>
	<script src="scripts/Mage.js"></script>
	<script src="scripts/Saboteur.js"></script>
	<script src="scripts/Sentinel.js"></script>
	<script src="scripts/Support.js"></script>
	<script src="scripts/Role.js"></script>
	
</head>
<body>
	<form>
		<div class="container">
			<div id="selections" class="row row-cols-4 text-center">
				<div class="col">
					<select id="rank" class="form-select" aria-label="Rank selection">
					</select>
				</div>					
				<div class="col">
					<select id="species" class="form-select" aria-label="Species selection">
					</select>
				</div>			
				<div class="col">
					<select id="role" class="form-select" aria-label="Role selection">
					</select>
				</div>
				<div class="col">
					<select id="level" class="form-select" aria-label="Level selection">
					</select>
				</div>
			</div>
			<div id="attributes" class="row text-center">
				<div class="col-7">
					<div class="container">
						<div class="row row-cols-4">
							<div class="col border">
								<div class="container">
									<div class="row">
										<div class="col">DEX</div>
										<div id="dex" class="col"></div>
									</div>
								</div>
							</div>
							<div class="col border">
								<div class="container">
									<div class="row">
										<div class="col">INS</div>
										<div id="ins" class="col"></div>
									</div>
								</div>
							</div>
							<div class="col border">
								<div class="container">
									<div class="row">
										<div class="col">MIG</div>
										<div id="mig" class="col"></div>
									</div>
								</div>
							</div>
							<div class="col border">
								<div class="container">
									<div class="row">
										<div class="col">WLP</div>
										<div id="wlp" class="col"></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				
				<div class="col"></div>
				
				<div class="col-4">
					<div class="container">
						<div class="row">
							<div class="col border">
								<div class="container">
									<div class="row">
										<div class="col-1">HP</div>
										<div id="hp" class="col"></div>
									</div>
								</div>
							</div>
							<div class="col border">
								<div class="container">
									<div class="row">
										<div class="col-1">MP</div>
										<div id="mp" class="col"></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div id="defense" class="row text-center">
				<div class="col-3">
					<div class="container">
						<div class="row">
							<div class="col border">
								<div class="container">
									<div class="row">
										<div class="col p-0">DEF</div>
										<div id="def" class="col"></div>
									</div>
								</div>
							</div>
							<div class="col border">
								<div class="container">
									<div class="row">
										<div class="col p-0">M.DEF</div>
										<div id="mdef" class="col"></div>
									</div>
								</div>
							</div>
						</div>					
					</div>
				</div>
				<div class="col-9">
					<div class="container">
						<div class="row">
							<div class="col border bg-secondary-subtle disabled physical" onclick=rotateAffinity("physical")>
								<div class="container">
									<div class="row">
										<div class="col p-0"><img src="https://thousandmazypaths.neocities.org/FUQuickGen/fabuicons/pP.svg" style="height:24px;"></div>
										<div class="col" id="physical"></div>
									</div>
								</div>
							</div>
							<div class="col border bg-secondary-subtle disabled air" onclick=rotateAffinity("air")>
								<div class="container">
									<div class="row" >
										<div class="col p-0"><img src="https://thousandmazypaths.neocities.org/FUQuickGen/fabuicons/aA.svg" style="height:24px;"></div>
										<div class="col" id="air"></div>
									</div>
								</div>
							</div>
							<div class="col border bg-secondary-subtle disabled bolt" onclick=rotateAffinity("bolt")>
								<div class="container">
									<div class="row">
										<div class="col p-0"><img src="https://thousandmazypaths.neocities.org/FUQuickGen/fabuicons/bB.svg" style="height:24px;"></div>
										<div class="col" id="bolt"></div>
									</div>
								</div>
							</div>
							<div class="col border bg-secondary-subtle disabled dark" onclick=rotateAffinity("dark")>
								<div class="container">
									<div class="row">
										<div class="col p-0"><img src="https://thousandmazypaths.neocities.org/FUQuickGen/fabuicons/dD.svg" style="height:24px;"></div>
										<div class="col" id="dark"></div>
									</div>
								</div>
							</div>
							<div class="col border bg-secondary-subtle disabled earth" onclick=rotateAffinity("earth")>
								<div class="container">
									<div class="row">
										<div class="col p-0"><img src="https://thousandmazypaths.neocities.org/FUQuickGen/fabuicons/eE.svg" style="height:24px;"></div>
										<div class="col" id="earth"></div>
									</div>
								</div>
							</div>
							<div class="col border bg-secondary-subtle disabled fire" onclick=rotateAffinity("fire")>
								<div class="container">
									<div class="row">
										<div class="col p-0"><img src="https://thousandmazypaths.neocities.org/FUQuickGen/fabuicons/fF.svg" style="height:24px;"></div>
										<div class="col" id="fire"></div>
									</div>
								</div>
							</div>
							<div class="col border bg-secondary-subtle disabled ice" onclick=rotateAffinity("ice")>
								<div class="container">
									<div class="row">
										<div class="col p-0"><img src="https://thousandmazypaths.neocities.org/FUQuickGen/fabuicons/iI.svg" style="height:24px;"></div>
										<div class="col" id="ice"></div>
									</div>
								</div>
							</div>
							<div class="col border bg-secondary-subtle disabled light" onclick=rotateAffinity("light")>
								<div class="container">
									<div class="row">
										<div class="col p-0"><img src="https://thousandmazypaths.neocities.org/FUQuickGen/fabuicons/lL.svg" style="height:24px;"></div>
										<div class="col" id="light"></div>
									</div>
								</div>
							</div>
							<div class="col border bg-secondary-subtle disabled poison" onclick=rotateAffinity("poison")>
								<div class="container">
									<div class="row">
										<div class="col p-0"><img src="https://thousandmazypaths.neocities.org/FUQuickGen/fabuicons/tT.svg" style="height:24px;"></div>
										<div class="col" id="poison" ></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row text-center">
				<div class="col">
					<div class="container">
						<div id="affinityNote" class="row">
							<div id="statusNotes" class="col-4 border">
							</div>
							<div id="weakAffinity" class="col-4 border">
							</div>
							<div id="strongAffinity" class="col-4 border">
							</div>
						</div>
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="col">
					<div id="attacks" class="container border">
						<div class="row">
							<div class="col">
								<h4>Basic Attacks</h3>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<div id="spells" class="container border">
						<div class="row">
							<div class="col-2">
								<h4>Spells</h4>
							</div>
							<div class="col">
								<h4>(max <span id="maxSpells">0</span>)</h4>
							</div>
						</div>
						<div class="row">
							<div id="spellNotes" class="col">
							</div>
						</div>	
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<div id="customizations" class="container border">
						<div class="row">
							<div class="col-2">
								<h4>Customizations</h4>
							</div>
							<div class="col">
								<h4>(max <span id="maxCustomizations">0</span>)</h4>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<div id="roleSkills" class="container border">
						<div class="row">
							<div class="col-2">
								<h4>Role Skills</h4>
							</div>
							<div class="col">
								<h4>(max <span id="maxRoleSkills">0</span>)</h4>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<div id="speciesSkills" class="container border">
						<div class="row">
							<div class="col-2">
								<h4>Species Skills</h4>
							</div>
							<div class="col">
								<h4>(max <span id="maxSpeciesSkills">0</span>)</h4>
							</div>
						</div>
						<div class="row">
							<div id="speciesSkillNotes" class="col">
							</div>
						</div>						
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col"><h4>Export to Fabulator</h4></div>
			</div>
			<div class="row">
				<div class="col"><textarea id="export" cols="80" rows="10"></textarea></div>
			</div>
		</div>
	</form>
	<script>
	
let npc = new NPC();

function clear() {
	$(".spell").remove();
	$(".speciesSkill").remove();
	$(".customization").remove();
	$(".roleSkill").remove();
	$(".attack").remove();
	$("#export").text("");
}

function update() {
	npc = new NPC();
	
	npc.rank = Rank[$("#rank").val()].type;
	npc.level = Level[$("#level").val()].type;
	npc.species = Species[$("#species").val()].type;
	npc.role = Role[$("#role").val()].type;
	npc.update();
	updateDisplay();
}

function rotateAffinity(affinity) {
	if(!npc.enabled[affinity]) {
		return;
	}
	switch(npc[affinity]) {
		case "": 
			npc[affinity] = "vu"; 
			break;
		case "vu": 
			npc[affinity] = "rs"; 
			break;
		case "rs": 
			npc[affinity] = "im"; 
			break;
		case "im": 
			npc[affinity] = "ab"; 
			break;
		case "ab": 
			npc[affinity] = ""; 
			break;
	}
	updateAffinityDisplay();
}

$(document).ready(function() {
	Object.keys(Rank).forEach(r => $("#rank").append($("<option>").attr("value", r).append(Rank[r].name)));
	$("#rank").val("NOOP").change();
	
	Object.keys(Species).forEach(r => $("#species").append($("<option>").attr("value", r).append(Species[r].name)));
	$("#species").val("NOOP").change();
	
	Object.keys(Role).forEach(r => $("#role").append($("<option>").attr("value", r).append(Role[r].name)));
	$("#role").val("NOOP").change();
	
	Object.keys(Level).forEach(r => $("#level").append($("<option>").attr("value", r).append(Level[r].name)));
	$("#level").val("NOOP").change();
	
	$('#species').on('change', function() {clear(); update(); });
	$('#role').on('change', function() {clear(); update(); });
	$('#level').on('change', function() {clear(); update(); });
	$('#rank').on('change', function() {clear(); update(); });
});
	</script>
</body>
</html>